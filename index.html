<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Config Transformer</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4f46e5">
<link rel="icon" href="icon-192.png">
<link rel="apple-touch-icon" href="icon-192.png">

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Poppins', sans-serif;
}

.animated-bg {
  background: linear-gradient(-45deg,#6366f1,#8b5cf6,#0ea5e9,#4f46e5);
  background-size: 400% 400%;
  animation: gradient 12s ease infinite;
}

@keyframes gradient {
  0% {background-position:0% 50%}
  50% {background-position:100% 50%}
  100% {background-position:0% 50%}
}

.glass {
  backdrop-filter: blur(25px);
  background: rgba(255,255,255,0.65);
}

.dark .glass {
  background: rgba(30,41,59,0.65);
}
</style>

<script>
if (localStorage.theme === 'dark' ||
(!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
  document.documentElement.classList.add('dark');
}
</script>

</head>

<body class="animated-bg min-h-screen flex items-center justify-center p-4 transition-all duration-500">

<div class="glass rounded-3xl shadow-2xl w-full max-w-md p-8 border border-white/40 dark:border-slate-700 transition">

<div class="flex justify-between items-center mb-4">
<span class="text-xs font-bold px-3 py-1 rounded-full bg-indigo-500 text-white">
PREMIUM
</span>

<button onclick="toggleTheme()" class="text-xl">
ðŸŒ™
</button>
</div>

<h1 class="text-3xl font-extrabold text-center mb-6 text-indigo-700 dark:text-indigo-300">
Config Transformer
</h1>

<input id="targetDomain" type="text" placeholder="Target Domain"
class="w-full bg-white/80 dark:bg-slate-800 border border-gray-200 dark:border-slate-600 rounded-2xl p-3 mb-4 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition">

<textarea id="originalLink" rows="3"
class="w-full bg-white/80 dark:bg-slate-800 border border-gray-200 dark:border-slate-600 rounded-2xl p-3 mb-4 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition"
placeholder="Paste Original VLESS"></textarea>

<button onclick="generateCustomLink()"
class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:scale-105 text-white font-bold py-3 rounded-2xl shadow-lg transition-all duration-300">
Generate
</button>

<div class="relative">
<textarea id="resultLink" rows="3"
class="w-full bg-white/70 dark:bg-slate-800 border border-gray-200 dark:border-slate-600 rounded-2xl p-3 mt-4"
placeholder="Result will appear here..."
readonly></textarea>

<button onclick="copyResult()" 
class="absolute right-3 top-7 text-sm bg-indigo-500 text-white px-3 py-1 rounded-xl">
Copy
</button>
</div>

<div class="text-center mt-6 text-sm text-gray-600 dark:text-gray-300">
Developer: <span class="font-bold">SisNaing</span>
</div>

</div>

<div id="toast" class="fixed bottom-6 bg-black text-white px-4 py-2 rounded-xl opacity-0 transition duration-300">
Copied Successfully
</div>

<script>
function toggleTheme() {
  if (document.documentElement.classList.contains('dark')) {
    document.documentElement.classList.remove('dark');
    localStorage.theme = 'light';
  } else {
    document.documentElement.classList.add('dark');
    localStorage.theme = 'dark';
  }
}

function generateCustomLink() {
  const domain = document.getElementById("targetDomain").value.trim();
  const original = document.getElementById("originalLink").value.trim();

  if (!domain || !original.startsWith("vless://")) {
    alert("Check input");
    return;
  }

  try {
    const parts = original.split('#');
    const url = new URL(parts[0]);
    const uuid = url.username;
    const path = url.searchParams.get("path") || "/";

    const params = new URLSearchParams();
    params.set("path", path);
    params.set("security", "tls");
    params.set("type", "ws");
    params.set("host", domain);
    params.set("sni", domain);

    const newLink = `vless://${uuid}@${domain}:443?${params.toString()}#SisNaing`;

    document.getElementById("resultLink").value = newLink;

  } catch {
    alert("Invalid VLESS format");
  }
}

function copyResult() {
  const text = document.getElementById("resultLink");
  text.select();
  document.execCommand("copy");

  const toast = document.getElementById("toast");
  toast.classList.remove("opacity-0");
  setTimeout(()=> toast.classList.add("opacity-0"),2000);
}

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./service-worker.js');
}
</script>

</body>
</html>
