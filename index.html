<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Config Transformer</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
body{font-family:sans-serif;}
.portBtn{
padding:10px;
border-radius:12px;
background:#e5e7eb;
}
.portBtn.active{
background:#6366f1;
color:white;
}
</style>
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

<div class="bg-white w-full max-w-md rounded-2xl shadow-xl p-6">

<h1 class="text-2xl font-bold text-center mb-6 text-indigo-600">
Config Transformer
</h1>

<!-- TARGET DOMAIN -->
<label class="font-semibold">Target Domain</label>
<input id="targetDomain" type="text"
class="w-full p-2 mb-4 rounded border">

<!-- TARGET PORT -->
<label class="font-semibold">Target Port</label>
<div class="grid grid-cols-3 gap-2 mb-4">
<button onclick="setPort(443)" class="portBtn active">443</button>
<button onclick="setPort(2053)" class="portBtn">2053</button>
<button onclick="setPort(2083)" class="portBtn">2083</button>
<button onclick="setPort(2087)" class="portBtn">2087</button>
<button onclick="setPort(2096)" class="portBtn">2096</button>
<button onclick="setPort(8443)" class="portBtn">8443</button>
</div>
<input type="hidden" id="selectedPort" value="443">

<!-- SNI -->
<label class="font-semibold">SNI / Bug Domain</label>
<select id="sniSelect" onchange="handleSNIChange()"
class="w-full p-2 mb-3 rounded border">
<option value="default">Default (Use Target Domain)</option>
<option value="mpt.com.mm">mpt.com.mm</option>
<option value="speedtest.net">speedtest.net</option>
<option value="wavemoney.com.mm">wavemoney.com.mm</option>
<option value="custom">Custom Input...</option>
</select>

<input id="customSNI" type="text"
placeholder="Enter Custom SNI"
class="w-full p-2 mb-4 rounded border hidden">

<!-- TARGET SERVER -->
<label class="font-semibold">Target Server Address</label>
<input id="targetServer" type="text"
class="w-full p-2 mb-4 rounded border">

<!-- ORIGINAL -->
<label class="font-semibold">Original VLESS</label>
<textarea id="originalLink" rows="3"
class="w-full p-2 mb-4 rounded border"></textarea>

<button onclick="generateCustomLink()"
class="w-full bg-indigo-600 text-white py-2 rounded mb-4">
Generate
</button>

<textarea id="resultLink" rows="3"
class="w-full p-2 rounded border"
readonly></textarea>

</div>

<script>

function setPort(port){
document.getElementById("selectedPort").value=port;
document.querySelectorAll(".portBtn").forEach(btn=>{
btn.classList.remove("active");
if(btn.innerText==port)btn.classList.add("active");
});
}

function handleSNIChange(){
const value=document.getElementById("sniSelect").value;
const custom=document.getElementById("customSNI");
if(value==="custom"){
custom.classList.remove("hidden");
}else{
custom.classList.add("hidden");
}
}

function generateCustomLink(){
const domain=document.getElementById("targetDomain").value.trim();
const original=document.getElementById("originalLink").value.trim();
const port=document.getElementById("selectedPort").value;
const server=document.getElementById("targetServer").value.trim();

let sni=document.getElementById("sniSelect").value;
if(sni==="default") sni=domain;
if(sni==="custom") sni=document.getElementById("customSNI").value.trim();

if(!domain||!original.startsWith("vless://")||!server){
alert("Check input");return;
}

try{
const parts=original.split('#');
const url=new URL(parts[0]);
const uuid=url.username;
const remark=parts[1]||"";
const path=url.searchParams.get("path")||"/";

const params=new URLSearchParams();
params.set("path",path);
params.set("security","tls");
params.set("type","ws");
params.set("host",domain);
params.set("sni",sni);

const newLink=`vless://${uuid}@${server}:${port}?${params.toString()}#${remark}`;

document.getElementById("resultLink").value=newLink;

}catch{
alert("Invalid VLESS format");
}
}

</script>

</body>
</html>
